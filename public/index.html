<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html, body { height: 100%; margin: 0; padding: 0; }
      #map { height: 100%; }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <script type="text/javascript">

    var markers = [];
    var map;

    function initMap() {
      var seoul_kangnam = {lat: 37.0000000, lng: 127.0712988};
      map = new google.maps.Map(document.getElementById('map'), {
        center: seoul_kangnam,
        zoom: 8,
        zoomControl: true,
        scaleControl: true,
      });

      setMarkers(map);
    }

    function setMarkers(map){

      var contentString = (function(title) {
        return '<div class="row">'+
        '<div class="col s12 m6 l8">'+
          '<div class="card blue-grey darken-1">'+
            '<div class="card-content white-text">'+
              '<span class="card-title">"'+title+'"</span>'+
              '<p>I am a very simple card. I am good at containing small bits of information.'+
              'I am convenient because I require little markup to use effectively.</p>'+
            '</div>'+
            '<div class="card-action">'+
              '<a href="#">This is a link</a>'+
              '<a href="#">This is a link</a>'+
            '</div>'+
          '</div>'+
        '</div>'+
      '</div>';
      });

      var locations = [
        {title : '고고비치', lat : 38.310223, lng : 128.542587},
        {title : '젯시티', lat : 38.057455, lng : 128.683149},
        {title : '펀서프', lat : 38.007202, lng : 128.729774},
        {title : '서퍼스', lat : 38.007868, lng : 128.730056},
        {title : '양양서프카페', lat : 38.006468, lng : 128.730310},
        {title : 'MLP SURF', lat : 36.788557, lng : 126.145063},
        {title : '포항서핑아카데미', lat : 36.112480, lng : 129.428191},
        {title : 'Steep Surf', lat : 36.112872, lng : 129.426841},
        {title : '진하서핑스쿨', lat : 35.388108, lng : 129.345940},
        {title : '송정서핑학교', lat : 35.179880, lng : 129.200368},
        {title : '서프짐', lat : 35.176479, lng : 129.196440},
        {title : '데이서프', lat : 35.180747, lng : 129.200461},
        {title : '몽키서프', lat : 35.176710, lng : 129.195925},
        {title : '더블루웨이브', lat : 33.236420, lng : 126.297946},
        {title : 'AKIASURF', lat : 33.332818, lng : 126.843590}      
      ];

      var infoWin = new google.maps.InfoWindow();
      // Add some markers to the map.
      // Note: The code uses the JavaScript Array.prototype.map() method to
      // create an array of markers based on a given "locations" array.
      // The map() method here has nothing to do with the Google Maps API.
      var markers = locations.map(function(location, i) {
        var marker = new google.maps.Marker({
          position: location
        });
          google.maps.event.addListener(marker, 'click', function(evt) {
          infoWin.setContent(contentString(location.title));
          infoWin.open(map, marker);
        })
          return marker;
      });

      // markerCluster.setMarkers(markers);
      // Add a marker clusterer to manage the markers.
      var markerCluster = new MarkerClusterer(map, markers, {
        imagePath: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m'
      });
    }

    </script>
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/css/materialize.min.css">
    <!-- Compiled and minified JavaScript -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/js/materialize.min.js"></script>
    
    <script src="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js"></script>    
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC1o99ZDjfgb8j0fSXgWNrVy-8ohgMNMQw&callback=initMap&region=KR"></script>
  </body>
</html>
